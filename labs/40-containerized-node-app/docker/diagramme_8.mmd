graph TB
    subgraph DevOps["ğŸ”„ CI/CD Pipeline"]
        Dev[ğŸ‘¨â€ğŸ’» Developer<br/>Git Push]
        GitHub[ğŸ“¦ GitHub/GitLab]
        CI[âš™ï¸ GitHub Actions<br/>Jenkins/GitLab CI]
        Registry[ğŸ³ Container Registry<br/>Docker Hub/ECR]
        
        Dev -->|git push| GitHub
        GitHub -->|trigger| CI
        CI -->|build & test| CI
        CI -->|push image| Registry
    end
    
    subgraph Monitoring["ğŸ“Š Monitoring & Logging Stack"]
        Prometheus[ğŸ“ˆ Prometheus<br/>Metrics Collection]
        Grafana[ğŸ“Š Grafana<br/>Dashboards]
        ELK[ğŸ“ ELK Stack<br/>Elasticsearch<br/>Logstash<br/>Kibana]
        AlertManager[ğŸš¨ AlertManager<br/>Notifications]
        
        Prometheus --> Grafana
        Prometheus --> AlertManager
    end
    
    subgraph Internet
        User[ğŸ‘¤ Users/Browser]
        LB[âš–ï¸ Cloud Load Balancer<br/>AWS ELB/GCP LB]
    end
    
    subgraph K8s["â˜¸ï¸ Kubernetes Cluster - Production"]
        
        subgraph Ingress["ğŸŒ Ingress Layer"]
            IngressCtrl[ğŸ”€ Ingress Controller<br/>NGINX/Traefik<br/>+ SSL/TLS]
        end
        
        subgraph Node1["ğŸ–¥ï¸ Worker Node 1"]
            Service1[ğŸ”€ Service<br/>ClusterIP]
            
            subgraph Deploy1["ğŸ“¦ Deployment"]
                Pod1[ğŸŸ¢ Pod 1<br/>App Container<br/>+ Sidecar Logging]
                Pod2[ğŸŸ¢ Pod 2<br/>App Container<br/>+ Sidecar Logging]
            end
            
            HPA1[ğŸ“Š HPA<br/>Horizontal Pod<br/>Autoscaler]
        end
        
        subgraph Node2["ğŸ–¥ï¸ Worker Node 2"]
            subgraph Deploy2["ğŸ“¦ Deployment"]
                Pod3[ğŸŸ¢ Pod 3<br/>App Container<br/>+ Sidecar Logging]
                Pod4[ğŸŸ¢ Pod 4<br/>App Container<br/>+ Sidecar Logging]
            end
        end
        
        subgraph Node3["ğŸ–¥ï¸ Worker Node 3<br/>(Database Node)"]
            StatefulSet[ğŸ“Š StatefulSet<br/>PostgreSQL]
            
            subgraph DBPods["Database Pods"]
                PodDB1[ğŸ˜ PostgreSQL<br/>Primary Pod]
                PodDB2[ğŸ˜ PostgreSQL<br/>Replica Pod]
            end
            
            PV1[(ğŸ’¾ Persistent Volume 1<br/>SSD Storage)]
            PV2[(ğŸ’¾ Persistent Volume 2<br/>SSD Storage)]
        end
        
        subgraph Storage["ğŸ’¾ Backup & Storage"]
            PVC1[ğŸ“ PVC 1]
            PVC2[ğŸ“ PVC 2]
            S3[â˜ï¸ S3/Cloud Storage<br/>Automated Backups<br/>+ Snapshots]
            CronJob[â° CronJob<br/>Backup Schedule<br/>Daily/Hourly]
        end
        
        ConfigMap[âš™ï¸ ConfigMap<br/>App Configuration]
        Secrets[ğŸ” Secrets<br/>DB Credentials<br/>API Keys]
    end
    
    %% Flux utilisateur
    User -->|HTTPS| LB
    LB -->|Route Traffic| IngressCtrl
    IngressCtrl -->|Forward| Service1
    Service1 -->|Load Balance| Pod1
    Service1 -->|Load Balance| Pod2
    Service1 -->|Load Balance| Pod3
    Service1 -->|Load Balance| Pod4
    
    %% CI/CD vers K8s
    Registry -.->|pull images| Deploy1
    Registry -.->|pull images| Deploy2
    CI -.->|kubectl apply| K8s
    
    %% Database connections
    Pod1 -.->|SQL Query| PodDB1
    Pod2 -.->|SQL Query| PodDB1
    Pod3 -.->|SQL Query| PodDB1
    Pod4 -.->|SQL Query| PodDB1
    
    PodDB1 -.->|Replication| PodDB2
    
    %% Persistence
    StatefulSet -->|manages| PodDB1
    StatefulSet -->|manages| PodDB2
    PodDB1 -->|mount| PVC1
    PodDB2 -->|mount| PVC2
    PVC1 -->|bind| PV1
    PVC2 -->|bind| PV2
    
    %% Backup
    CronJob -.->|backup DB| PodDB1
    PodDB1 -.->|dump| S3
    PV1 -.->|snapshot| S3
    
    %% Configuration
    ConfigMap -.->|inject config| Pod1
    ConfigMap -.->|inject config| Pod2
    Secrets -.->|inject secrets| Pod1
    Secrets -.->|inject secrets| PodDB1
    
    %% Autoscaling
    HPA1 -.->|scale| Deploy1
    HPA1 -.->|scale| Deploy2
    
    %% Monitoring
    Pod1 -.->|metrics| Prometheus
    Pod2 -.->|metrics| Prometheus
    Pod3 -.->|metrics| Prometheus
    PodDB1 -.->|metrics| Prometheus
    Service1 -.->|metrics| Prometheus
    
    %% Logging
    Pod1 -.->|logs| ELK
    Pod2 -.->|logs| ELK
    Pod3 -.->|logs| ELK
    PodDB1 -.->|logs| ELK
    
    %% Styles
    style DevOps fill:#e8f5e9,stroke:#4caf50,stroke-width:3px
    style Monitoring fill:#fff3e0,stroke:#ff9800,stroke-width:3px
    style K8s fill:#e3f2fd,stroke:#2196f3,stroke-width:4px
    style Internet fill:#fce4ec,stroke:#e91e63,stroke-width:2px
    
    style User fill:#e91e63,stroke:#c2185b,color:#fff
    style LB fill:#ff5722,stroke:#d84315,color:#fff
    style IngressCtrl fill:#f44336,stroke:#c62828,color:#fff
    style Service1 fill:#e74c3c,stroke:#c0392b,color:#fff
    
    style Pod1 fill:#2ecc71,stroke:#27ae60,color:#fff
    style Pod2 fill:#2ecc71,stroke:#27ae60,color:#fff
    style Pod3 fill:#2ecc71,stroke:#27ae60,color:#fff
    style Pod4 fill:#2ecc71,stroke:#27ae60,color:#fff
    
    style PodDB1 fill:#9b59b6,stroke:#8e44ad,color:#fff
    style PodDB2 fill:#9b59b6,stroke:#8e44ad,color:#fff
    
    style PV1 fill:#34495e,stroke:#2c3e50,color:#fff
    style PV2 fill:#34495e,stroke:#2c3e50,color:#fff
    style S3 fill:#3498db,stroke:#2980b9,color:#fff
    
    style Prometheus fill:#ff9800,stroke:#f57c00,color:#fff
    style Grafana fill:#ff9800,stroke:#f57c00,color:#fff
    style ELK fill:#795548,stroke:#5d4037,color:#fff
    
    style GitHub fill:#4caf50,stroke:#388e3c,color:#fff
    style CI fill:#4caf50,stroke:#388e3c,color:#fff
    style Registry fill:#00bcd4,stroke:#0097a7,color:#fff
